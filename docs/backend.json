{
  "entities": {
    "UserCredential": {
      "title": "UserCredential",
      "description": "Represents a user account for the panel, either an owner or a manager.",
      "type": "object",
      "properties": {
        "username": { "type": "string" },
        "password": { "type": "string", "description": "Hashed password for managers. Owner password is via env vars." },
        "role": { "type": "string", "enum": ["owner", "manager"] },
        "assignedServerId": { "type": "string", "description": "FK to Server document. Only for managers." },
        "createdAt": { "type": "string", "format": "date-time" },
        "expiresAt": { "type": "string", "format": "date-time" }
      },
      "required": ["username", "role", "createdAt"]
    },
    "Server": {
      "title": "Server",
      "description": "Represents a remote VPS server configuration.",
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "host": { "type": "string" },
        "port": { "type": "number" },
        "username": { "type": "string" },
        "password": { "type": "string", "description": "SSH password for the server." },
        "serviceCommand": { "type": "string", "description": "The command to restart the VPN service, e.g., 'systemctl restart zivpn'." }
      },
      "required": ["name", "host", "port", "username", "password"]
    },
    "VpnUser": {
      "title": "VpnUser",
      "description": "Represents a VPN user on a specific server.",
      "type": "object",
      "properties": {
        "username": { "type": "string" },
        "serverId": { "type": "string", "description": "FK to the Server document." },
        "createdBy": { "type": "string", "description": "Username of the manager/owner who created this user." },
        "createdAt": { "type": "string", "format": "date-time" },
        "expiresAt": { "type": "string", "format": "date-time" }
      },
      "required": ["username", "serverId", "createdBy", "createdAt", "expiresAt"]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "/credentials/{credentialId}": {
      "schema": { "$ref": "#/entities/UserCredential" },
      "description": "Stores user credentials for panel access (owners and managers)."
    },
    "/servers/{serverId}": {
      "schema": { "$ref": "#/entities/Server" },
      "description": "Stores remote VPS server configurations."
    },
    "/vpn-users/{vpnUserId}": {
      "schema": { "$ref": "#/entities/VpnUser" },
      "description": "Stores individual VPN user accounts tied to a server."
    }
  }
}
